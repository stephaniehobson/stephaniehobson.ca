<!DOCTYPE html>
<html>
<title>The MDN Redesign “Behind the Scenes”</title>
<meta charset="UTF-8">
<meta name="description" content="">
<link rel="stylesheet" href="/css/main-6fb1063f.css">


<body>
    <header>
    <div class="header">
        <a href="/about/">
            <img class="header-avatar" src="http://en.gravatar.com/avatar/d70bd194080649fe6fac9c012d4de39c?s=200">
        </a>
        <h1>
            
                <a href="/">Abstract Sequential</a>
            
            <span>Stephanie Hobson's abstract thoughts in the sequence she has them.</span>
        </h1>
    </div>
</header>


    
<main>
    <article itemscope itemtype=http://schema.org/BlogPosting>
        <h1 itemprop="name headline">The MDN Redesign “Behind the Scenes”</h1>
        <p>
            <span itemprop="author">Stephanie Hobson</span>
            <time datetime="2017-08-01" itemprop="datePublished">
                2017 August 01
        	</time>
        </p>
        
            <ul id="tags">
                
                    <li> <a href="https://stephaniehobson.ca/tags/mozilla">mozilla</a> </li>
                
            </ul>
        
        <div itemprop="articleBody">
            

<p><em>This article was originally published on Mozilla&rsquo;s <a href="https://hacks.mozilla.org/2017/07/the-mdn-redesign-behind-the-scenes/">Hacks Blog</a>.</em></p>

<p><a href="https://github.com/mozilla/kuma">Kuma</a>, the code that produces the <a href="https://developer.mozilla.org/en-US/">MDN</a> site, is a weird mix of the old and the new. <a href="https://developer.mozilla.org/en-US/docs/MDN_at_ten">MDN turned ten</a> in 2015 and there’s still code and content around from those very first days. When I sat down to start coding the current redesign, the first thing I did was <a href="https://github.com/mozilla/kuma/pull/4254">remove the last few traces of the last redesign</a>. In contrast, we have a cutting-edge audience: 92% of our users have a browser with CSS grid support! <a href="https://mozilla.github.io/meao/2017/06/26/http2/">We enabled http2</a>, and 98% of our users have seen benefits from that.</p>

<p>One of the ways we deal with old code in kuma is with the campsite rule: <em>Always leave your campsite better than you found it</em>. A redesign touches a lot of files, and this was a great opportunity to clean up and refactor — at least until the deadline started getting close.</p>

<p>A redesign is also a great time to change stuff you’re afraid of breaking. People are more understanding of you working the bugs out of something new than breaking something that’s worked for years. I removed 640 lines of stale code during the redesign. (And if I broke a six-year-old XPCOM tutorial you use daily by removing the custom list-style-type, please <a href="https://bugzilla.mozilla.org/enter_bug.cgi?format=guided#h=dupes|Mozilla%20Developer%20Network|">file a bug</a>!)</p>

<h2 id="one-website-with-two-looks">One website with two looks</h2>

<p>Rather than working on the CSS for the redesign in a separate “redesign” folder, we duplicated all the files and added “-old” to the file name of the old files, which means that all of our redesign work is happening in the “official” files. This preserves the git history and means we don’t have to move anything around after launch. Once we’re happy with the code, we can delete the “-old” files with confidence.</p>

<p>To serve the new styles to our beta testers and the “-old” ones to everyone else, we use <a href="https://github.com/jsocol/django-waffle">Django Waffle</a>. Waffle can also be used to serve different content but because there’s a strong separation of presentation and content on MDN, we’ve made very few changes to the HTML.</p>

<h2 id="bugs-our-beta-testers-found">Bugs our beta testers found</h2>

<p>MDN is <em>huge</em>, and we can’t test every page in every locale. We’re really lucky to have active beta testers. :) Some of the biggest things they turned up for us were:</p>

<h3 id="highlighting">Highlighting</h3>

<p><img src="http://stephaniehobson.ca/wordpress/wp-content/uploads/2017/10/vi.png" alt="Problems with Zilla Highlight in Vietnamese and when there&amp;#039;s inline code examples." /></p>

<p>We started out by replicating Mozilla’s brand “highlight” effect by using the Zilla Slab Highlight font, but we abandoned that pretty quickly when problems turned up in many <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375831">of</a> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375917">our</a> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1375879">locales</a> and when used in combination with inline code.</p>

<p>The current approach puts a full-width black background on h3 and h4 headings by default, and then some JavaScript runs to add a <code>&amp;lt;span&amp;gt;</code> tag so that the black background hugs the heading text. Progressive enhancement at work.</p>

<p>We went back and forth about this for a while, wondering if the JavaScript and extra <code>&amp;lt;span&amp;gt;</code> was worth the effort. But we stuck with it because it makes the h3 and h4 headings much easier to spot when scanning the page.</p>

<h3 id="what-s-taiwanese-for-slab-serif">What’s Taiwanese for Slab Serif?</h3>

<p><img src="http://stephaniehobson.ca/wordpress/wp-content/uploads/2017/10/taiwanese.png" alt="Showing the difference between Zilla&amp;#039;s thick strokes and the thin strokes of Taiwanese." /></p>

<p>Previously we used Open Sans as our heading text. With the redesign, we switched to Zilla Slab. Open Sans was thin and an average height for a font. It didn’t look out of place next to the system fallbacks for Chinese or Japanese characters.</p>

<p>Zilla is big and thick, and we started getting feedback about the contrast with these system fallbacks. Additionally, the character set for Zilla is European Latin only at the moment, so Vietnamese, which uses Latin characters plus a couple Latin characters not used in Europe, displayed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1379259">font fallbacks in the middles of words</a>.</p>

<p>To address both these problems, we implemented a system that allowed us to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1379259">override the site fonts on a per-locale basis</a>.</p>

<h3 id="contrast">Contrast</h3>

<p>We received many complaints about the old design’s low-contrast display. We went a bit too far the other way with this design and received complaints about the high contrast. We’ve toned it down to the ever-popular <code>#333</code> now.</p>

<h2 id="what-s-next">What’s next</h2>

<p>We’re moving on from this to make specific improvements to the article pages:</p>

<ul>
<li>Putting code samples high on the page; our hard-working writers and volunteers are doing this, one page at a time.</li>
<li>A better approach to readable line-lengths and wide code examples, inspired by the Hacks Blog theme.</li>
<li>Compatibility tables that display desktop and mobile data side by side.</li>
<li>Code samples you can experiment with in the page.</li>
</ul>

<h2 id="who-is-we">Who is “we”?</h2>

<p>The MDN dev team is:</p>

<ul>
<li><strong>Stephanie Hobson</strong>, me, CSS-Pre-Pre-Processor</li>
<li><strong>Schalk Neethling</strong>, who reviewed each of my 30+ pull requests in ALL THE BROWSERS, sometimes multiple times</li>
<li><strong>John Whitlock</strong>, who did the awesome <a href="https://github.com/mozilla/kuma/pull/4303#issue-241394205">locale fallbacks</a></li>
<li><strong>Ryan Johnson</strong>, who always asks “Why not?” when John and I say things can’t be done.</li>
</ul>

<p>We blog sporadically on the <a href="https://mozilla.github.io/meao/2017/07/06/kuma-report/">Mozilla Marketing Engineering &amp; Operations blog</a>.</p>

<p>You should also read this blog post by our Product Manager, Kadir Topal, about <a href="https://blog.mozilla.org/opendesign/future-mdn-focus-web-docs/">The Future of MDN</a>.</p>

        </div>
        <p><a href="https://stephaniehobson.ca/posts/the-mdn-redesign-behind-the-scenes/" itemprop="url">Permalink</a></p>
    </article>
</main>


    <footer>
    &copy; Stephanie Hobson. <div class="social social-footer">
    <ul class="social-list">
        <li class="social-item">
            <a class="social-link" href="http://www.flickr.com/people/stephaniehobson/" rel="me">
                <img class="social-icon" alt="" src="/images/icons/flickr.svg" height="32" width="32">
                <span class="social-name">Flickr</span>
            </a>
        </li>
        <li class="social-item">
            <a class="social-link" href="https://github.com/stephaniehobson" rel="me">
                <img class="social-icon" alt="" src="/images/icons/github.svg" height="32" width="32">
                <span class="social-name">GitHub</span>
            </a>
        </li>
        <li class="social-item">
            <a class="social-link" href="https://noti.st/stephaniehobson" rel="me">
                <img class="social-icon" alt="" src="/images/notist-2961d3e4.svg" height="32" width="32">
                <span class="social-name">Notist</span>
            </a>
        </li>
        <li class="social-item">
            <a class="social-link" href="http://www.linkedin.com/in/stephaniehobsonca" rel="me">
                <img class="social-icon" alt="" src="/images/icons/linkedin.svg" height="32" width="32">
                <span class="social-name">LinkedIn</span>
            </a>
        </li>
        <li class="social-item">
            <a class="social-link" href="https://pinboard.in/search/u:stephaniehobson?query=webdesign" rel="me">
                <img class="social-icon" alt="" src="/images/icons/pinboard.svg" height="32" width="32">
                <span class="social-name">Pinboard</span>
            </a>
        </li>
        <li class="social-item">
            <a class="social-link" href="http://twitter.com/stephaniehobson" rel="me">
                <img class="social-icon" alt="" src="/images/icons/twitter.svg" height="32" width="32">
                <span class="social-name">Twitter</span>
            </a>
        </li>
    </ul>
</div>

</footer>

</body>
</html>
