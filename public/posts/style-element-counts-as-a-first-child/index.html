<!DOCTYPE html>
<html>
<head>
    <title>A style tag counts as a :first-child</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
</head>
<body>
    <main>
        <article>
            <h1>A style tag counts as a :first-child</h1>
            <p><strong>EDIT 2011-09-15: All of this applies to <samp>&lt;script&gt;</samp> in the body as well.</strong></p>

<p>I have some bad news and a fix (I hesitate to call it good news).</p>

<p>HTML5 introduces a way for us to include <samp>&lt;style&gt;</samp> elements on the page, we just need to give them an attribute of <samp>scoped</samp>. So, for example, if you have an SSI included widget you can include the styles in the widget file instead of trying to devise a way to add them to the head.</p>

<p><strong>A Problem</strong></p>

<p>But it causes an itsy bitsy problem with the styles. The <samp>&lt;style&gt;</samp> counts as an element, and if you put it first, it becomes the first-child. The styles I&rsquo;d defined for the first-child in that block were not applied to the (now) second child.</p>

<p>In other words this:
<code>div p:first-child</code>
stopped working when I added the style to the HTML here:
`
&lt;div&gt;
**&lt;style&gt; p{color:#00F;} &lt;/style&gt;
**&lt;p&gt;Text!&lt;/p&gt;</p>

<p>&lt;/div&gt;
`</p>

<p><strong>A Fix</strong></p>

<p>Fortunately we can include <samp>style</samp> in our CSS declarations (and even style it if you want, <a href="/wtf/scope_style_first-child.html">I gave it a width, and garish background colour</a> in both FF3.6 and Chrome) so an adjacent sibling selector is the fix:
<code>div style:first-child + p</code></p>

<p>I&rsquo;m not keen on going through my styles sheets and adding this rule to every place I have first-child declarations but we don&rsquo;t use scoped style elements too much so hopefully I won&rsquo;t have to.</p>

<p>The other option would be to not put the <samp>&lt;style&gt;</samp> first in the parent I pretty clearly remember reading that the style has to be the first-child, of course, I can&rsquo;t find where I read it.</p>

<p><strong>Side Note: using <samp>&lt;style scoped&gt;</samp> today.</strong></p>

<p>As of August 2011 there are no browsers that support the <samp>scoped</samp> attribute but if you&rsquo;re using an HTML5 doctype you can still use <samp>&lt;style scoped&gt;</samp> today. Browsers have been happily rendering style elements inside the body for quite some time, it just wasn&rsquo;t valid HTML before ;)</p>

<p>The old browsers will apply the styles in your scoped tag to the entire page so I combine it with a class to get the effect I intended.</p>

<p>`&lt;div class=&quot;foo&quot;&gt;</p>

<p>&lt;style scoped&gt; .foo p{color:#00F;} &lt;/style&gt;</p>

<p>&lt;p&gt;Text!&lt;/p&gt;</p>

<p>&lt;/div&gt;
`</p>

        </article>
    </main>
</body>
</html>