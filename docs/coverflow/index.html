<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>CSS3 only coverflow</title>

<script src="jquery-1.4.2.min.js" language="javascript"></script>
<script>

function fixbug(thishash){
	$('.coverflow .cover').removeClass('fixit');
	window.location.hash=thishash;
	// the CSS doesn't use the class change, we just need to get safari to reflow the document
	$('.coverflow .cover').addClass('fixit');
}

$(window).load(function(){
	if(window.location.hash){
		fixbug(window.location.hash);
	}else{
		window.location = window.location + "#bird";
	}
	$('.scroll a').click(function(event){fixbug(this.hash);return false});}
	
);
</script>

<style>

body{
	background:#000;
	color:#fff;
	text-align:center;
	background-color:#000;
}

#wrapper{
	position:relative;
	width:700px;
	margin:0px auto;
	text-align:left;
}

a img{border:0px;}

.scroll{position:absolute; top:350px; left:130px; z-index:200;width:700px;text-align:center;}
.scroll li{float:left;width:30px;height:20px;overflow:hidden;list-style-type:none;}
.scroll li a{background-color:#999999; padding-left:30px;}
.scroll li:nth-child(even) a{background-color:#CCCCCC;}

.coverflow{
	width:700px;
	height:450px;
	overflow:hidden; 
	-webkit-mask-image: -webkit-gradient(linear, left top, right top, from(rgba(0,0,0,0)), color-stop(0.1, rgba(0,0,0,1)), color-stop(0.9, rgba(0,0,0,1)),to(rgba(0,0,0,0)));
	background-color:#000000;
}
.coverflow .covers{
	width:20000px;
	padding:0px 0px 0px 1000px;
}
.coverflow .cover{
	display:block; 
	float:left;
	width:50px;
	height:500px;
}
.coverflow .cover a{
	position:relative;
	left:190px;
	display:block; 
	height:500px; 
	width:112px; 
	overflow:hidden;
	z-index:10;
	-webkit-perspective: 400;
	padding-top:20px;
	background-color:#000000;
}
	
.coverflow .cover img{
	-webkit-box-reflect:below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(0.5, transparent), to(rgba(255,255,255,0.2)));
	-webkit-transform: translate3d(-36px, 0px, 0px) rotateY(45deg) scale(0.8);
	-webkit-transition-property: -webkit-transform;
    -webkit-transition-duration: 0s;
    -webkit-transition-timing-function: ease-out;
}

.coverflow .cover:target{
	position:relative;
	width:700px;
	text-align:center;
	z-index:100;
	background-color:transparent;
}
.coverflow .cover:target a{
	position:static; 
	height:500px; 
	width:200px;
	margin:auto;
}
.coverflow .cover:target img{
	-webkit-transform: translate3d(0px, 0px, 0px) rotateY(-0deg) scale(1);
	-webkit-transition-duration: 0.4s;
}

/* this shoudl work without the JS, but it doesn't */
.coverflow .cover:target ~ .cover {}
.coverflow .cover:target ~ .cover a {width:50px;left:-188px;}
.coverflow .cover:target ~ .cover img{-webkit-transform: translate3d(-110px, 0px, 0px) rotateY(-45deg) scale(0.8);}

.coverflow .cover:target + .cover {}
.coverflow .cover:target + .cover a {width:112px;left:-250px;}
.coverflow .cover:target + .cover img{-webkit-transform: translate3d(-52px, 0px, 0px) rotateY(-45deg) scale(0.8);}

</style>

</head>

<body>

<div id="wrapper">

<div class="coverflow">

	<ul class="scroll">
		<li><a href="#berries">berries</a></li>
		<li><a href="#cherry">cherry</a></li>
		<li><a href="#cirque">cirque</a></li>
		<li><a href="#wall">wall</a></li>
		<li><a href="#sky">sky</a></li>
		<li><a href="#bird">bird</a></li>
		<li><a href="#cupid">cupid</a></li>
		<li><a href="#tunnel">tunnel</a></li>
		<li><a href="#angel">angel</a></li>
		<li><a href="#fates">fates</a></li>
		<li><a href="#giraffe">giraffe</a></li>
		<li><a href="#fountian">fountian</a></li>
	</ul>
	<ul class="covers">
		<li class="cover" id="berries"><a href="berries.jpg"><img src="berries.jpg" width="200" /></a></li>
		<li class="cover" id="cherry"><a href="cherry.jpg"><img src="cherry.jpg" width="200"  /></a></li>
		<li class="cover" id="cirque"><a href="cirque.jpg"><img src="cirque.jpg" width="200" /></a></li>
		<li class="cover" id="wall"><a href="europe07_0002_Layer 25.jpg"><img src="europe07_0002_Layer 25.jpg" width="200"  /></a></li>
		<li class="cover" id="sky"><a href="europe07_0003_Layer 24.jpg"><img src="europe07_0003_Layer 24.jpg" width="200" /></a></li>
		<li class="cover" id="bird"><a href="europe07_0004_Layer 23.jpg"><img src="europe07_0004_Layer 23.jpg" width="200" /></a></li>
		<li class="cover" id="cupid"><a href="europe07_0005_Layer 22.jpg"><img src="europe07_0005_Layer 22.jpg" width="200" /></a></li>
		<li class="cover" id="tunnel"><a href="europe07_0006_Layer 21.jpg"><img src="europe07_0006_Layer 21.jpg" width="200" /></a></li>
		<li class="cover" id="angel"><a href="europe07_0018_Layer 9.jpg"><img src="europe07_0018_Layer 9.jpg" width="200" /></a></li>
		<li class="cover" id="fates"><a href="europe07_0020_Layer 7.jpg"><img src="europe07_0020_Layer 7.jpg" width="200" /></a></li>
		<li class="cover" id="giraffe"><a href="europe07_0021_Layer 6.jpg"><img src="europe07_0021_Layer 6.jpg" width="200" /></a></li>
		<li class="cover" id="fountian"><a href="fountian.jpg"><img src="fountian.jpg" width="200" /></a></li>
	</ul>
</div>


<div>

<h1>CSS only* coverflow <small>(Webkit only example)</small></h1>


<p>This was fun but I've mostly lost interest in it so I thought I'd put it up incase someone else wanted to take it from here :)</p>

<p>* Okay, so it's not quite CSS, there's a <a href="https://bugs.webkit.org/show_bug.cgi?id=12520">Safari bug</a> with general sibling selectors in dynamic situations so the code is right but it doesn't work. The javascript fuction just adds and removes a class to get Safari to reflow the conent. The 'right scroll' animation might work properly if it wasn't for this problem. </p>

<p>I only built it with the webkit prefixes, some of this will work in FireFox with the -moz too. Some of it already does ;)</p>

<p>Here's a <a href="targettest.html#three">fun test file </a>that I used to figure out the side scroll effect, I'm sure it has other applications, I'd love a tweet with a link if you find one.</p>

<p>Some stuff that needs to be fixed, maybe with javascript maybe with CSS:
<ul>
	<li>it doesn't work on load if you don't load to a target</li>
	<li>the animation effect 'scrolling' to the right doesn't work</li>
	<li>smooth side scrolling</li>
	<li>an actual slider to go between 'albums'</li>
</ul>
</p>

<p>Some links I found useful putting this together:
<ul>
	<li><a href="http://webkit.org/blog/138/css-animation/">http://webkit.org/blog/138/css-animation/</a> (transitons)</li>
	<li><a href="http://webkit.org/blog/175/introducing-css-gradients/">http://webkit.org/blog/175/introducing-css-gradients/</a> (gradients)</li>
	<li><a href="http://webkit.org/blog/181/css-masks/">http://webkit.org/blog/181/css-masks/</a> (mask)</li>
	<li><a href=">http://webkit.org/blog/182/css-reflections/ ">http://webkit.org/blog/182/css-reflections/</a> (reflections)</li>
	<li><a href="http://www.westciv.com/tools/gradients/ ">http://www.westciv.com/tools/gradients/</a> (gradient)</li>
</ul>
<p>There were two other links I'd like to share but I've lost them. They were more inspiration than resources. One was a portfolio website where the selected photo was clear but the others blurry. The other was a replication of coverflow using javascript intended for use on the iPad. A tweet if you recognize my descriptions would be awesme :)</p>

<p>2010. May. 28.</p>
</div>



</div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-535288-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
